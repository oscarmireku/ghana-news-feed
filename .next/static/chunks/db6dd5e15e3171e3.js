(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,8949,e=>{e.v({adomTag:"page-module__J8Njuq__adomTag",card:"page-module__J8Njuq__card",cardMeta:"page-module__J8Njuq__cardMeta",cardTitle:"page-module__J8Njuq__cardTitle",categoryTag:"page-module__J8Njuq__categoryTag",citiTag:"page-module__J8Njuq__citiTag",container:"page-module__J8Njuq__container",content:"page-module__J8Njuq__content",controls:"page-module__J8Njuq__controls",grid:"page-module__J8Njuq__grid",gwTag:"page-module__J8Njuq__gwTag",header:"page-module__J8Njuq__header",image:"page-module__J8Njuq__image",imageContainer:"page-module__J8Njuq__imageContainer",joyTag:"page-module__J8Njuq__joyTag",loading:"page-module__J8Njuq__loading",main:"page-module__J8Njuq__main",peaceTag:"page-module__J8Njuq__peaceTag",refreshButton:"page-module__J8Njuq__refreshButton",sourceTag:"page-module__J8Njuq__sourceTag",spin:"page-module__J8Njuq__spin",spinner:"page-module__J8Njuq__spinner",subtitle:"page-module__J8Njuq__subtitle",title:"page-module__J8Njuq__title"})},64617,e=>{"use strict";var a=e.i(28682),t=e.i(49766),r=e.i(8949);let l=e=>{let a=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,a,t)=>t?t.toUpperCase():a.toLowerCase());return a.charAt(0).toUpperCase()+a.slice(1)},i=(...e)=>e.filter((e,a,t)=>!!e&&""!==e.trim()&&t.indexOf(e)===a).join(" ").trim();var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let s=(0,t.forwardRef)(({color:e="currentColor",size:a=24,strokeWidth:r=2,absoluteStrokeWidth:l,className:s="",children:n,iconNode:d,...c},u)=>(0,t.createElement)("svg",{ref:u,...o,width:a,height:a,stroke:e,strokeWidth:l?24*Number(r)/Number(a):r,className:i("lucide",s),...!n&&!(e=>{for(let a in e)if(a.startsWith("aria-")||"role"===a||"title"===a)return!0})(c)&&{"aria-hidden":"true"},...c},[...d.map(([e,a])=>(0,t.createElement)(e,a)),...Array.isArray(n)?n:[n]])),n=(e,a)=>{let r=(0,t.forwardRef)(({className:r,...o},n)=>(0,t.createElement)(s,{ref:n,iconNode:a,className:i(`lucide-${l(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,r),...o}));return r.displayName=l(e),r},d=n("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),c=n("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),u=n("newspaper",[["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-4 0v-9a2 2 0 0 1 2-2h2",key:"39pd36"}],["rect",{width:"8",height:"4",x:"10",y:"6",rx:"1",key:"aywv1n"}]]),m=n("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);function g(e,a){if(""===a)return"";if(!e)return"Just now";let t=new Date(e),r=new Date;t.toLocaleString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}).replace(",","");let l=Math.floor((r.getTime()-t.getTime())/1e3),i="";if(l<60)i="Just now";else if(l<3600){let e=Math.floor(l/60);i=`${e} minute${1!==e?"s":""} ago`}else if(l<86400){let e=Math.floor(l/3600);i=`${e} hour${1!==e?"s":""} ago`}else{let e=Math.floor(l/86400);i=`${e} day${1!==e?"s":""} ago`}let o=t.toLocaleDateString("en-US",{month:"short"}),s=t.getDate(),n=t.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}).toLowerCase();return`${o} ${s}, ${n}. ${i}`}function h(){let[e,l]=(0,t.useState)([]),[i,o]=(0,t.useState)(!0),[s,n]=(0,t.useState)(null),[h,_]=(0,t.useState)(null),[p,f]=(0,t.useState)(!1),j=(0,t.useCallback)(async(e=!1)=>{e&&f(!0),n(null);try{if(e)try{await fetch("/api/update-json?force=true",{method:"POST"}),console.log("Forced scrape and JSON update completed")}catch(e){console.error("Failed to update news-feed.json:",e)}let a=await fetch("/api/news?content=false");if(!a.ok)throw Error(`Failed to fetch news: ${a.status} ${a.statusText}`);let t=await a.json();t.stories&&(l(t.stories),_(new Date))}catch(e){console.error("Failed to fetch news",e),n(e.message||"An unknown error occurred")}finally{o(!1),e&&f(!1)}},[]);return(0,t.useEffect)(()=>{j()},[j]),(0,a.jsx)("main",{className:r.default.main,children:(0,a.jsxs)("div",{className:r.default.container,children:[(0,a.jsxs)("header",{className:r.default.header,children:[(0,a.jsx)("h1",{className:r.default.title,children:"Ghana Top News (Vercel Test)"}),(0,a.jsx)("p",{className:r.default.subtitle,children:"Unified feed: GhanaWeb, AdomOnline, PeaceFM, MyJoyOnline"})]}),(0,a.jsx)("div",{className:r.default.controls,children:(0,a.jsxs)("button",{className:r.default.refreshButton,onClick:()=>j(!0),disabled:p,children:[(0,a.jsx)(d,{size:16,className:p?r.default.spinner:""}),p?"Updating...":"Refresh"]})}),s?(0,a.jsxs)("div",{style:{textAlign:"center",padding:"2rem",color:"#ef4444"},children:[(0,a.jsx)("p",{style:{fontWeight:"bold",marginBottom:"0.5rem"},children:"Error loading news"}),(0,a.jsx)("p",{children:s}),(0,a.jsx)("button",{onClick:()=>j(!0),style:{marginTop:"1.5rem",padding:"0.5rem 1rem",background:"#334155",border:"none",borderRadius:"4px",color:"white",cursor:"pointer"},children:"Try Again"})]}):i?(0,a.jsxs)("div",{className:r.default.loading,children:[(0,a.jsx)(m,{size:40,className:r.default.spinner}),(0,a.jsx)("p",{children:"Scraping latest stories..."})]}):0===e.length?(0,a.jsxs)("div",{style:{textAlign:"center",padding:"3rem",color:"#94a3b8"},children:[(0,a.jsx)(u,{size:48,style:{margin:"0 auto 1rem",display:"block"}}),(0,a.jsx)("p",{children:"No stories found."}),(0,a.jsx)("p",{style:{fontSize:"0.9rem",marginTop:"0.5rem"},children:"The database might be empty."})]}):(0,a.jsx)("div",{className:r.default.grid,children:e.map(e=>(0,a.jsxs)("a",{href:e.link,target:"_blank",rel:"noopener noreferrer",className:r.default.card,children:[(0,a.jsx)("div",{className:r.default.imageContainer,children:e.image?(0,a.jsx)("img",{src:e.image,alt:e.title,className:r.default.image,loading:"lazy",referrerPolicy:"no-referrer"}):(0,a.jsx)("div",{style:{height:"100%",width:"100%",display:"flex",alignItems:"center",justifyContent:"center",background:"#334155"},children:(0,a.jsx)(u,{size:48,color:"#64748b"})})}),(0,a.jsxs)("div",{className:r.default.content,children:[(0,a.jsx)("div",{className:`${r.default.sourceTag} 
                    ${"MyJoyOnline"===e.source?r.default.joyTag:"CitiNewsRoom"===e.source?r.default.citiTag:"GhanaWeb"===e.source?r.default.gwTag:"AdomOnline"===e.source?r.default.adomTag:"PeaceFM"===e.source?r.default.peaceTag:r.default.citiTag}`,children:e.source}),e.section&&(0,a.jsx)("div",{className:r.default.categoryTag,children:e.section}),(0,a.jsx)("h2",{className:r.default.cardTitle,children:e.title}),g(e.timestamp,e.time)&&(0,a.jsxs)("div",{className:r.default.cardMeta,children:[(0,a.jsx)(c,{size:14}),(0,a.jsx)("span",{children:g(e.timestamp,e.time)})]})]})]},e.id))}),!i&&h&&(0,a.jsxs)("div",{style:{textAlign:"center",marginTop:"3rem",color:"var(--muted)",fontSize:"0.8rem"},children:["Last updated: ",h.toLocaleTimeString()]})]})})}e.s(["default",()=>h],64617)}]);