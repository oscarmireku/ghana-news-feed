{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 198, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/oscar/news/src/lib/db.ts"],"sourcesContent":["import { createClient } from '@libsql/client';\r\n\r\nconst url = process.env.TURSO_DATABASE_URL || 'file:news.db';\r\nconst authToken = process.env.TURSO_AUTH_TOKEN;\r\n\r\nexport const db = createClient({\r\n  url,\r\n  authToken,\r\n});\r\n\r\n// Initialize database (Async wrapper needed or call this explicitly if needed, \r\n// using top-level await if environment supports it, but simpler to invoke lazily or just ensure it exists.)\r\n// For simplicity in Next.js Serverless, we can attempt to init on load or just cache the promise.\r\n// Actually, pure SQL CREATE TABLE IF NOT EXISTS is cheap.\r\n\r\nasync function initDb() {\r\n  await db.execute(`\r\n    CREATE TABLE IF NOT EXISTS articles (\r\n      id TEXT PRIMARY KEY,\r\n      source TEXT NOT NULL,\r\n      title TEXT NOT NULL,\r\n      link TEXT UNIQUE NOT NULL,\r\n      image TEXT,\r\n      time TEXT NOT NULL,\r\n      section TEXT NOT NULL,\r\n      timestamp INTEGER NOT NULL,\r\n      created_at INTEGER NOT NULL,\r\n      content TEXT\r\n    )\r\n  `);\r\n}\r\n\r\n// We can just run this. in a serverless env it might run multiple times but it's safe.\r\n// Ideally we'd await this before other ops.\r\ninitDb().catch(console.error);\r\n\r\n\r\nexport interface Article {\r\n  id: string;\r\n  source: string;\r\n  title: string;\r\n  link: string;\r\n  image: string | null;\r\n  time: string;\r\n  section: string;\r\n  timestamp: number;\r\n  created_at?: number;\r\n  content?: string;\r\n}\r\n\r\nexport async function insertArticles(articles: Article[]): Promise<number> {\r\n  if (articles.length === 0) return 0;\r\n\r\n  let count = 0;\r\n  // LibSQL client doesn't support massive bulk inserts in one statement easily without constructing the string manually\r\n  // or using transactions nicely. \r\n  // We can use a transaction.\r\n\r\n  const tx = await db.transaction('write');\r\n  try {\r\n    for (const article of articles) {\r\n      await tx.execute({\r\n        sql: `\r\n          INSERT INTO articles (id, source, title, link, image, time, section, timestamp, created_at, content)\r\n          VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)\r\n          ON CONFLICT(link) DO UPDATE SET\r\n            time = excluded.time,\r\n            timestamp = excluded.timestamp,\r\n            image = excluded.image,\r\n            title = excluded.title,\r\n            content = CASE WHEN excluded.content IS NOT NULL THEN excluded.content ELSE articles.content END\r\n        `,\r\n        args: [\r\n          article.id,\r\n          article.source,\r\n          article.title,\r\n          article.link,\r\n          article.image,\r\n          article.time,\r\n          article.section,\r\n          article.timestamp,\r\n          Date.now(),\r\n          article.content || null\r\n        ]\r\n      });\r\n      count++;\r\n    }\r\n    await tx.commit();\r\n    return count;\r\n\r\n  } catch (err) {\r\n    console.error('Error inserting articles:', err);\r\n    // Don't rollback explicitly, LibSQL client handles it or it just fails.\r\n    return 0;\r\n  }\r\n}\r\n\r\nexport async function getAllArticles(limit: number = 500): Promise<Article[]> {\r\n  const rs = await db.execute({\r\n    sql: `\r\n      SELECT id, source, title, link, image, time, section, timestamp, content\r\n      FROM articles\r\n      WHERE image IS NOT NULL AND image != ''\r\n      ORDER BY timestamp DESC\r\n      LIMIT ?\r\n    `,\r\n    args: [limit]\r\n  });\r\n\r\n  // rs.rows is correct\r\n  return rs.rows as unknown as Article[];\r\n}\r\n\r\nexport async function getArticleCount(): Promise<number> {\r\n  const rs = await db.execute('SELECT COUNT(*) as count FROM articles');\r\n  return Number(rs.rows[0].count);\r\n}\r\n\r\n\r\nexport async function deleteOldArticles(limit: number): Promise<number> {\r\n  // SQLite doesn't support DELETE ... LIMIT directly in all versions, \r\n  // but simpler: DELETE WHERE id NOT IN (SELECT id ... LIMIT ?)\r\n  const rs = await db.execute({\r\n    sql: `\r\n      DELETE FROM articles \r\n      WHERE id NOT IN (\r\n        SELECT id FROM articles \r\n        ORDER BY timestamp DESC \r\n        LIMIT ?\r\n      )\r\n    `,\r\n    args: [limit]\r\n  });\r\n  return rs.rowsAffected;\r\n}\r\n\r\nexport async function deleteInvalidArticles(): Promise<number> {\r\n  const unwantedTitlePatterns = [\r\n    'Home - News', 'Home - Business', 'Home - Sports', 'Home-Business',\r\n    'Business archive', 'News Archive', 'Sports Archive', 'Photo Archives',\r\n    'Archive', 'Category:', 'Section:', 'More News', 'More Stories',\r\n    'View All', 'Latest News', 'Top Stories'\r\n  ];\r\n\r\n  let count = 0;\r\n  try {\r\n    const badImageResult = await db.execute(`\r\n      DELETE FROM articles \r\n      WHERE image IS NULL \r\n         OR image = '' \r\n         OR image LIKE '%.svg%'\r\n         OR image LIKE '%.svg?%'\r\n    `);\r\n    count += badImageResult.rowsAffected;\r\n\r\n    // Construct OR conditions for titles\r\n    if (unwantedTitlePatterns.length > 0) {\r\n      const conditions = unwantedTitlePatterns.map(() => `title LIKE ?`).join(' OR ');\r\n      const args = unwantedTitlePatterns.map(p => `%${p}%`);\r\n\r\n      const badTitleResult = await db.execute({\r\n        sql: `DELETE FROM articles WHERE ${conditions}`,\r\n        args: args\r\n      });\r\n      count += badTitleResult.rowsAffected;\r\n    }\r\n\r\n  } catch (err) {\r\n    console.error('Error deleting invalid articles:', err);\r\n  }\r\n  return count;\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;AAAA;;;;;;AAEA,MAAM,MAAM,QAAQ,GAAG,CAAC,kBAAkB,IAAI;AAC9C,MAAM,YAAY,QAAQ,GAAG,CAAC,gBAAgB;AAEvC,MAAM,KAAK,IAAA,qNAAY,EAAC;IAC7B;IACA;AACF;AAEA,gFAAgF;AAChF,4GAA4G;AAC5G,kGAAkG;AAClG,0DAA0D;AAE1D,eAAe;IACb,MAAM,GAAG,OAAO,CAAC,CAAC;;;;;;;;;;;;;EAalB,CAAC;AACH;AAEA,uFAAuF;AACvF,4CAA4C;AAC5C,SAAS,KAAK,CAAC,QAAQ,KAAK;AAgBrB,eAAe,eAAe,QAAmB;IACtD,IAAI,SAAS,MAAM,KAAK,GAAG,OAAO;IAElC,IAAI,QAAQ;IACZ,sHAAsH;IACtH,iCAAiC;IACjC,4BAA4B;IAE5B,MAAM,KAAK,MAAM,GAAG,WAAW,CAAC;IAChC,IAAI;QACF,KAAK,MAAM,WAAW,SAAU;YAC9B,MAAM,GAAG,OAAO,CAAC;gBACf,KAAK,CAAC;;;;;;;;;QASN,CAAC;gBACD,MAAM;oBACJ,QAAQ,EAAE;oBACV,QAAQ,MAAM;oBACd,QAAQ,KAAK;oBACb,QAAQ,IAAI;oBACZ,QAAQ,KAAK;oBACb,QAAQ,IAAI;oBACZ,QAAQ,OAAO;oBACf,QAAQ,SAAS;oBACjB,KAAK,GAAG;oBACR,QAAQ,OAAO,IAAI;iBACpB;YACH;YACA;QACF;QACA,MAAM,GAAG,MAAM;QACf,OAAO;IAET,EAAE,OAAO,KAAK;QACZ,QAAQ,KAAK,CAAC,6BAA6B;QAC3C,wEAAwE;QACxE,OAAO;IACT;AACF;AAEO,eAAe,eAAe,QAAgB,GAAG;IACtD,MAAM,KAAK,MAAM,GAAG,OAAO,CAAC;QAC1B,KAAK,CAAC;;;;;;IAMN,CAAC;QACD,MAAM;YAAC;SAAM;IACf;IAEA,qBAAqB;IACrB,OAAO,GAAG,IAAI;AAChB;AAEO,eAAe;IACpB,MAAM,KAAK,MAAM,GAAG,OAAO,CAAC;IAC5B,OAAO,OAAO,GAAG,IAAI,CAAC,EAAE,CAAC,KAAK;AAChC;AAGO,eAAe,kBAAkB,KAAa;IACnD,qEAAqE;IACrE,8DAA8D;IAC9D,MAAM,KAAK,MAAM,GAAG,OAAO,CAAC;QAC1B,KAAK,CAAC;;;;;;;IAON,CAAC;QACD,MAAM;YAAC;SAAM;IACf;IACA,OAAO,GAAG,YAAY;AACxB;AAEO,eAAe;IACpB,MAAM,wBAAwB;QAC5B;QAAe;QAAmB;QAAiB;QACnD;QAAoB;QAAgB;QAAkB;QACtD;QAAW;QAAa;QAAY;QAAa;QACjD;QAAY;QAAe;KAC5B;IAED,IAAI,QAAQ;IACZ,IAAI;QACF,MAAM,iBAAiB,MAAM,GAAG,OAAO,CAAC,CAAC;;;;;;IAMzC,CAAC;QACD,SAAS,eAAe,YAAY;QAEpC,qCAAqC;QACrC,IAAI,sBAAsB,MAAM,GAAG,GAAG;YACpC,MAAM,aAAa,sBAAsB,GAAG,CAAC,IAAM,CAAC,YAAY,CAAC,EAAE,IAAI,CAAC;YACxE,MAAM,OAAO,sBAAsB,GAAG,CAAC,CAAA,IAAK,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;YAEpD,MAAM,iBAAiB,MAAM,GAAG,OAAO,CAAC;gBACtC,KAAK,CAAC,2BAA2B,EAAE,YAAY;gBAC/C,MAAM;YACR;YACA,SAAS,eAAe,YAAY;QACtC;IAEF,EAAE,OAAO,KAAK;QACZ,QAAQ,KAAK,CAAC,oCAAoC;IACpD;IACA,OAAO;AACT"}},
    {"offset": {"line": 379, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/oscar/news/src/app/api/cron/route.ts"],"sourcesContent":["\r\nimport { NextResponse } from 'next/server';\r\nimport * as cheerio from 'cheerio';\r\nimport { insertArticles, deleteOldArticles, deleteInvalidArticles, Article } from '@/lib/db';\r\n\r\nexport const dynamic = 'force-dynamic';\r\nexport const maxDuration = 60; // Extend timeout for hobby plan (if applicable)\r\n\r\ninterface Story {\r\n    id: string;\r\n    source: string;\r\n    title: string;\r\n    link: string;\r\n    image: string | null;\r\n    time: string;\r\n    timestamp: number;\r\n    section?: string;\r\n    content?: string;\r\n}\r\n\r\n// ---------------------------------------------------------------------------\r\n// Helpers\r\n// ---------------------------------------------------------------------------\r\n\r\nfunction normalizeTitle(title: string): string {\r\n    return title.toLowerCase().replace(/[^a-z0-9]/g, '');\r\n}\r\n\r\nfunction resolveUrl(base: string, relative: string): string {\r\n    try {\r\n        return new URL(relative, base).href;\r\n    } catch {\r\n        return relative;\r\n    }\r\n}\r\n\r\n// Parse publication date from various formats\r\nfunction parsePublicationDate(dateStr: string): { timestamp: number; display: string } {\r\n    if (!dateStr || dateStr.trim() === '') {\r\n        return { timestamp: Date.now(), display: 'Recent' };\r\n    }\r\n\r\n    const cleaned = dateStr.trim();\r\n    const d = new Date(cleaned);\r\n\r\n    if (!isNaN(d.getTime())) {\r\n        const timestamp = d.getTime();\r\n        const display = d.toLocaleString('en-US', {\r\n            hour: 'numeric',\r\n            minute: '2-digit',\r\n            month: 'short',\r\n            day: 'numeric'\r\n        });\r\n        return { timestamp, display };\r\n    }\r\n\r\n    // If we can't parse it, return current time\r\n    return { timestamp: Date.now(), display: 'Recent' };\r\n}\r\n\r\nfunction timeAgo(timestamp: number): string {\r\n    const seconds = Math.floor((Date.now() - timestamp) / 1000);\r\n\r\n    let interval = seconds / 31536000; // years\r\n    if (interval > 1) return Math.floor(interval) + \" years ago\";\r\n    interval = seconds / 2592000; // months\r\n    if (interval > 1) return Math.floor(interval) + \" months ago\";\r\n    interval = seconds / 86400; // days\r\n    if (interval > 1) return Math.floor(interval) + \" days ago\";\r\n    interval = seconds / 3600; // hours\r\n    if (interval > 1) return Math.floor(interval) + \" hours ago\";\r\n    interval = seconds / 60; // minutes\r\n    if (interval > 1) return Math.floor(interval) + \" minutes ago\";\r\n    return Math.floor(seconds) + \" seconds ago\";\r\n}\r\n\r\n// Fallback: Fetch article page to find og:image and parsing date\r\nasync function fetchArticleMetadata(link: string, source?: string): Promise<{ image: string | null, timestamp?: number, time?: string, content?: string }> {\r\n    try {\r\n        // Special handling for PeaceFM API\r\n        if (source === 'PeaceFM' || link.includes('peacefmonline.com')) {\r\n            // Extract ID. format: /.../.../123456-some-slug\r\n            const idMatch = link.match(/\\/(\\d+)-/);\r\n            if (idMatch) {\r\n                const id = idMatch[1];\r\n                const apiUrl = `https://articles-engine.peacefmonline.com/v1/articles/${id}`;\r\n                const res = await fetch(apiUrl, { headers: { 'User-Agent': 'Mozilla/5.0' } });\r\n                if (res.ok) {\r\n                    const json = await res.json();\r\n                    if (json.status === 'success' && json.data) {\r\n                        const d = json.data;\r\n                        return {\r\n                            image: d.main_photo?.photo_url || null,\r\n                            timestamp: new Date(d.created_at).getTime(),\r\n                            time: timeAgo(new Date(d.created_at).getTime()),\r\n                            content: d.main_description // This is HTML\r\n                        };\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        const res = await fetch(link, { headers: { 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36' } });\r\n        if (!res.ok) return { image: null };\r\n        const html = await res.text();\r\n        const $ = cheerio.load(html);\r\n\r\n        // Image\r\n        const image = $('meta[property=\"og:image\"]').attr('content') ||\r\n            $('meta[name=\"twitter:image\"]').attr('content') ||\r\n            null;\r\n\r\n        // Date\r\n        let dateStr = $('meta[property=\"og:article:published_time\"]').attr('content') ||\r\n            $('meta[property=\"article:published_time\"]').attr('content') ||\r\n            $('meta[name=\"article:published_time\"]').attr('content') ||\r\n            $('meta[property=\"og:updated_time\"]').attr('content') ||\r\n            $('meta[property=\"article:modified_time\"]').attr('content') ||\r\n            $('meta[itemprop=\"datePublished\"]').attr('content') ||\r\n            $('meta[name=\"pubdate\"]').attr('content') ||\r\n            $('#date').text() ||\r\n            $('time').first().attr('datetime');\r\n\r\n        let timestamp: number | undefined;\r\n        let time: string | undefined;\r\n\r\n        if (dateStr) {\r\n            const parsed = parsePublicationDate(dateStr);\r\n            if (parsed.display !== 'Recent') {\r\n                timestamp = parsed.timestamp;\r\n                time = parsed.display;\r\n            }\r\n        }\r\n\r\n        // Content Extraction\r\n        let contentSelector = '';\r\n        if (source === '3News') contentSelector = '.prose';\r\n        else if (source === 'GhanaWeb') contentSelector = '#medsection1, .article-content-area';\r\n        else if (source === 'AdomOnline') contentSelector = '.td-post-content';\r\n        else if (source === 'MyJoyOnline') contentSelector = '#article-text';\r\n\r\n        // Generic fallback selectors\r\n        if (!contentSelector) {\r\n            contentSelector = '.entry-content, .article-body, .post-content, .content-wrapper, article';\r\n        }\r\n\r\n        let contentEl = $(contentSelector).first();\r\n        if (contentEl.length === 0 && source === 'GhanaWeb') {\r\n            // Fallback for GhanaWeb\r\n            contentEl = $('p').parent().filter((i, el) => $(el).find('p').length > 3).first();\r\n        }\r\n\r\n        let content = '';\r\n        if (contentEl.length) {\r\n            // Remove unwanted elements\r\n            contentEl.find('script, style, iframe, .related-posts, .ads, .ad, [class*=\"ad-\"], [id*=\"ad-\"]').remove();\r\n\r\n            // Get paragraphs\r\n            const paragraphs: string[] = [];\r\n            contentEl.find('p').each((_, el) => {\r\n                const text = $(el).text().trim();\r\n                if (text.length > 20) { // Filter out short snippets/captions\r\n                    paragraphs.push(`<p>${text}</p>`);\r\n                }\r\n            });\r\n            content = paragraphs.join('');\r\n        }\r\n\r\n        return { image, timestamp, time, content };\r\n    } catch {\r\n        return { image: null };\r\n    }\r\n}\r\n\r\n// ---------------------------------------------------------------------------\r\n// Source: GhanaWeb (Scrape Sections)\r\n// ---------------------------------------------------------------------------\r\nasync function scrapeGhanaWeb(): Promise<Story[]> {\r\n    const sections = [\r\n        { name: 'News', url: 'https://www.ghanaweb.com/GhanaHomePage/NewsArchive/' },\r\n        { name: 'Sports', url: 'https://www.ghanaweb.com/GhanaHomePage/SportsArchive/' },\r\n        { name: 'Business', url: 'https://www.ghanaweb.com/GhanaHomePage/business/' }\r\n    ];\r\n\r\n    const stories: Story[] = [];\r\n    const seenLinks = new Set<string>();\r\n\r\n    await Promise.all(sections.map(async (sec) => {\r\n        try {\r\n            const res = await fetch(sec.url, { headers: { 'User-Agent': 'Mozilla/5.0' } });\r\n            const html = await res.text();\r\n            const $ = cheerio.load(html);\r\n\r\n            let candidates = $('.inner-lead, .sub-menu-list__news li, .news_listing .inner, #leads .inner, .news-list li');\r\n\r\n            if (candidates.length === 0) {\r\n                candidates = $('a[href*=\"artikel.php\"], a[href*=\"/NewsArchive/\"], a[href*=\"/SportsArchive/\"], a[href*=\"/business/\"]');\r\n            }\r\n\r\n            candidates.slice(0, 10).each((_, el) => {\r\n                const a = $(el).is('a') ? $(el) : $(el).find('a').first();\r\n                const link = a.attr('href');\r\n                let title = a.attr('title') || a.text().trim();\r\n\r\n                if (!title || title.length < 5) {\r\n                    title = $(el).find('h2, h3, h4, p').text().trim();\r\n                }\r\n\r\n                let image = $(el).find('img').attr('src');\r\n                if (!image) {\r\n                    image = $(el).closest('div, li').find('img').attr('src');\r\n                }\r\n\r\n                let dateStr = $(el).find('.date, .time, time, .published, .post-date').first().text().trim();\r\n                if (!dateStr) {\r\n                    dateStr = $(el).find('time').attr('datetime') || '';\r\n                }\r\n                const { timestamp, display } = parsePublicationDate(dateStr);\r\n\r\n                const unwantedTitlePatterns = [\r\n                    'Home - News', 'Home - Business', 'Home - Sports', 'Home-Business',\r\n                    'Business archive', 'News Archive', 'Sports Archive', 'Photo Archives',\r\n                    'Archive', 'Category:', 'Section:', 'More News', 'More Stories',\r\n                    'View All', 'Latest News', 'Top Stories'\r\n                ];\r\n\r\n                const isUnwantedTitle = unwantedTitlePatterns.some(pattern =>\r\n                    title.toLowerCase().trim() === pattern.toLowerCase() ||\r\n                    title.toLowerCase().includes(pattern.toLowerCase())\r\n                );\r\n\r\n                const hasArticleId = link?.includes('artikel.php?ID=') ||\r\n                    /\\/\\d{7,}-/.test(link || '');\r\n\r\n                const hasSvgImage = image?.toLowerCase().endsWith('.svg');\r\n\r\n                if (link && title && title.length > 10 && !link.includes('javascript') && !link.includes('#') && !isUnwantedTitle && hasArticleId && !hasSvgImage) {\r\n                    const fullLink = resolveUrl('https://www.ghanaweb.com', link);\r\n                    if (seenLinks.has(fullLink)) return;\r\n                    seenLinks.add(fullLink);\r\n\r\n                    if (image) image = resolveUrl('https://cdn.ghanaweb.com', image);\r\n\r\n                    stories.push({\r\n                        id: `gw-${stories.length + Math.random()}`,\r\n                        source: 'GhanaWeb',\r\n                        title,\r\n                        link: fullLink,\r\n                        image: image || null,\r\n                        time: display,\r\n                        timestamp,\r\n                        section: sec.name\r\n                    });\r\n                }\r\n            });\r\n        } catch (e) {\r\n            console.error(`GhanaWeb ${sec.name} Error:`, e);\r\n        }\r\n    }));\r\n\r\n    return stories;\r\n}\r\n\r\n// ---------------------------------------------------------------------------\r\n// Source: AdomOnline (RSS Sections)\r\n// ---------------------------------------------------------------------------\r\nasync function scrapeAdomOnline(): Promise<Story[]> {\r\n    const feeds = [\r\n        { name: 'News', url: 'https://www.adomonline.com/category/news/feed/' },\r\n        { name: 'Sports', url: 'https://www.adomonline.com/category/sports/feed/' },\r\n        { name: 'Business', url: 'https://www.adomonline.com/category/business/feed/' }\r\n    ];\r\n\r\n    const stories: Story[] = [];\r\n    const seenLinks = new Set<string>();\r\n\r\n    await Promise.all(feeds.map(async (feed) => {\r\n        try {\r\n            const res = await fetch(feed.url, { headers: { 'User-Agent': 'Mozilla/5.0' } });\r\n            const xml = await res.text();\r\n            const $ = cheerio.load(xml, { xmlMode: true });\r\n\r\n            $('item').slice(0, 5).each((_, el) => {\r\n                const title = $(el).find('title').text().trim();\r\n                const link = $(el).find('link').text().trim();\r\n                const pubDate = $(el).find('pubDate').text().trim();\r\n\r\n                if (seenLinks.has(link)) return;\r\n                seenLinks.add(link);\r\n\r\n                let timestamp = Date.now();\r\n                let timeDisplay = 'Recent';\r\n                if (pubDate) {\r\n                    const d = new Date(pubDate);\r\n                    if (!isNaN(d.getTime())) {\r\n                        timestamp = d.getTime();\r\n                        timeDisplay = d.toLocaleString('en-US', { hour: 'numeric', minute: '2-digit', month: 'short', day: 'numeric' });\r\n                    }\r\n                }\r\n\r\n                let image = $(el).find('media\\\\:content').attr('url') ||\r\n                    $(el).find('media\\\\:thumbnail').attr('url');\r\n\r\n                if (!image) {\r\n                    const content = $(el).find('content\\\\:encoded').text();\r\n                    const match = content.match(/src=\"([^\"]+)\"/);\r\n                    if (match) image = match[1];\r\n                }\r\n\r\n                stories.push({\r\n                    id: `adom-${stories.length + Math.random()}`,\r\n                    source: 'AdomOnline',\r\n                    title,\r\n                    link,\r\n                    image: image || null,\r\n                    time: timeDisplay,\r\n                    timestamp,\r\n                    section: feed.name\r\n                });\r\n            });\r\n        } catch (e) {\r\n            console.error(`AdomOnline ${feed.name} Error:`, e);\r\n        }\r\n    }));\r\n\r\n    return stories;\r\n}\r\n\r\n// ---------------------------------------------------------------------------\r\n// Source: PeaceFM (API)\r\n// ---------------------------------------------------------------------------\r\nasync function scrapePeaceFM(): Promise<Story[]> {\r\n    try {\r\n        const response = await fetch('https://articles-engine.peacefmonline.com/v1/articles?limit=30', {\r\n            headers: { 'User-Agent': 'Mozilla/5.0' }\r\n        });\r\n        if (!response.ok) return [];\r\n\r\n        const json = await response.json();\r\n        if (json.status !== 'success' || !json.data) return [];\r\n\r\n        const articles = json.data.map((item: any) => {\r\n            const section = item.section?.section_location || 'local';\r\n            const category = item.category?.category_location || 'news';\r\n            const link = `https://www.peacefmonline.com/pages/${section}/${category}/${item.slug}`;\r\n\r\n            return {\r\n                id: `peace-${item.article_id}`,\r\n                source: 'PeaceFM',\r\n                title: item.main_title,\r\n                link: link,\r\n                image: item.main_photo?.photo_url || null,\r\n                time: timeAgo(new Date(item.created_at).getTime()),\r\n                section: item.section?.section_name || 'News',\r\n                timestamp: new Date(item.created_at).getTime()\r\n            };\r\n        });\r\n\r\n        return articles.filter((a: any) => a.title && a.link);\r\n    } catch (error) {\r\n        console.error('Error scraping PeaceFM:', error);\r\n        return [];\r\n    }\r\n}\r\n\r\n// ---------------------------------------------------------------------------\r\n// Source: MyJoyOnline (HTML Scrape Sections)\r\n// ---------------------------------------------------------------------------\r\nasync function scrapeMyJoyOnline(): Promise<Story[]> {\r\n    const sections = [\r\n        { name: 'News', url: 'https://www.myjoyonline.com/news/' },\r\n        { name: 'Sports', url: 'https://www.myjoyonline.com/sports/' },\r\n        { name: 'Business', url: 'https://www.myjoyonline.com/business/' }\r\n    ];\r\n\r\n    const stories: Story[] = [];\r\n    const seenLinks = new Set<string>();\r\n\r\n    await Promise.all(sections.map(async (sec) => {\r\n        try {\r\n            const res = await fetch(sec.url, { headers: { 'User-Agent': 'Mozilla/5.0' } });\r\n            const html = await res.text();\r\n            const $ = cheerio.load(html);\r\n\r\n            const containers = $('.news-main-list .col-lg-3, .col-lg-6, .home-section-story-list li, .main-listing-article');\r\n\r\n            containers.slice(0, 10).each((_, el) => {\r\n                const imgLink = $(el).find('a.bgposition');\r\n                const titleLink = $(el).find('h3 a, h4 a, .title a').first();\r\n                const fallbackLink = $(el).find('a').first();\r\n\r\n                const finalLink = titleLink.length ? titleLink : (imgLink.length ? imgLink : fallbackLink);\r\n\r\n                const link = finalLink.attr('href');\r\n                let title = finalLink.text().trim();\r\n                if (!title) title = $(el).find('h1, h2, h3, h4').text().trim();\r\n\r\n                let image = $(el).find('img').attr('data-src') || $(el).find('img').attr('src');\r\n                if (!image && imgLink.attr('style')) {\r\n                    const match = imgLink.attr('style')?.match(/url\\(['\"]?([^'\"]+)['\"]?\\)/);\r\n                    if (match) image = match[1];\r\n                }\r\n\r\n                let dateStr = $(el).find('.date, time, .post-date, .published, .entry-date').first().text().trim();\r\n                if (!dateStr) {\r\n                    dateStr = $(el).find('time').attr('datetime') || '';\r\n                }\r\n                const { timestamp, display } = parsePublicationDate(dateStr);\r\n\r\n                if (link && title && title.length > 10) {\r\n                    const fullLink = resolveUrl('https://www.myjoyonline.com', link);\r\n                    if (seenLinks.has(fullLink)) return;\r\n                    seenLinks.add(fullLink);\r\n\r\n                    stories.push({\r\n                        id: `joy-${stories.length + Math.random()}`,\r\n                        source: 'MyJoyOnline',\r\n                        title,\r\n                        link: fullLink,\r\n                        image: image || null,\r\n                        time: display,\r\n                        timestamp,\r\n                        section: sec.name\r\n                    });\r\n                }\r\n            });\r\n        } catch (e) {\r\n            console.error(`MyJoyOnline ${sec.name} Error:`, e);\r\n        }\r\n    }));\r\n\r\n    return stories;\r\n}\r\n\r\n// ---------------------------------------------------------------------------\r\n// Source: 3News (RSS Feed)\r\n// ---------------------------------------------------------------------------\r\nasync function scrape3News(): Promise<Story[]> {\r\n    const stories: Story[] = [];\r\n    const seenLinks = new Set<string>();\r\n\r\n    try {\r\n        const res = await fetch('https://3news.com/news/feed.xml', {\r\n            headers: { 'User-Agent': 'Mozilla/5.0' }\r\n        });\r\n        if (!res.ok) throw new Error(`3News RSS failed: ${res.status}`);\r\n\r\n        const xml = await res.text();\r\n        const $ = cheerio.load(xml, { xmlMode: true });\r\n\r\n        $('item').slice(0, 10).each((_, el) => {\r\n            const title = $(el).find('title').text().trim();\r\n            const link = $(el).find('link').text().trim();\r\n            const pubDate = $(el).find('pubDate').text().trim();\r\n\r\n            if (seenLinks.has(link)) return;\r\n            seenLinks.add(link);\r\n\r\n            let timestamp = Date.now();\r\n            let timeDisplay = 'Recent';\r\n            if (pubDate) {\r\n                const parsed = parsePublicationDate(pubDate);\r\n                timestamp = parsed.timestamp;\r\n                timeDisplay = parsed.display;\r\n            }\r\n\r\n            let image = $(el).find('media\\\\:content').attr('url') ||\r\n                $(el).find('media\\\\:thumbnail').attr('url');\r\n\r\n            if (!image) {\r\n                const description = $(el).find('description').text();\r\n                const match = description.match(/src=\"([^\"]+)\"/);\r\n                if (match) image = match[1];\r\n            }\r\n\r\n            stories.push({\r\n                id: `3news-${stories.length + Math.random()}`,\r\n                source: '3News',\r\n                title,\r\n                link,\r\n                image: image || null,\r\n                time: timeDisplay,\r\n                timestamp,\r\n                section: 'News'\r\n            });\r\n        });\r\n    } catch (e) {\r\n        console.error('3News Error:', e);\r\n    }\r\n\r\n    return stories;\r\n}\r\n\r\nasync function scrapeDailyGuide(): Promise<{ stories: Article[], logs: string[] }> {\r\n    const stories: Article[] = [];\r\n    const logs: string[] = [];\r\n    try {\r\n        const res = await fetch('https://dailyguidenetwork.com/feed/', {\r\n            headers: {\r\n                'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36'\r\n            },\r\n            next: { revalidate: 300 }\r\n        });\r\n\r\n        if (!res.ok) {\r\n            logs.push(`DailyGuide RSS Error: ${res.status}`);\r\n            return { stories, logs };\r\n        }\r\n\r\n        const xml = await res.text();\r\n        const $ = cheerio.load(xml, { xmlMode: true });\r\n\r\n        const items = $('item').slice(0, 10);\r\n        logs.push(`DailyGuide: Found ${items.length} items`);\r\n\r\n        items.each((_, el) => {\r\n            const title = $(el).find('title').text().trim();\r\n            const link = $(el).find('link').text().trim();\r\n            const pubDate = $(el).find('pubDate').text().trim();\r\n\r\n            if (!link) return;\r\n\r\n            let timestamp = Date.now();\r\n            let timeDisplay = 'Recent';\r\n            if (pubDate) {\r\n                const parsed = parsePublicationDate(pubDate);\r\n                timestamp = parsed.timestamp;\r\n                timeDisplay = parsed.display;\r\n            }\r\n\r\n            stories.push({\r\n                id: `dailyguide-${stories.length + Math.random()}`,\r\n                source: 'DailyGuide',\r\n                title,\r\n                link,\r\n                image: null,\r\n                time: timeDisplay,\r\n                timestamp,\r\n                section: 'News'\r\n            });\r\n        });\r\n    } catch (e) {\r\n        logs.push(`DailyGuide Error: ${e}`);\r\n    }\r\n\r\n    return { stories, logs };\r\n}\r\n\r\n// ---------------------------------------------------------------------------\r\n// Source: Generic RSS Scraper\r\n// ---------------------------------------------------------------------------\r\nconst GENERIC_FEEDS = [\r\n    { source: 'CitiNewsRoom', url: 'https://citinewsroom.com/feed/', section: 'News' },\r\n    { source: 'Modern Ghana', url: 'https://www.modernghana.com/rssfeed/news.xml', section: 'News' },\r\n    { source: 'GNA', url: 'https://gna.org.gh/feed/', section: 'News' },\r\n    { source: 'Graphic Online', url: 'https://www.graphic.com.gh/news/general-news?format=feed', section: 'News' },\r\n    { source: 'Ghanaian Times', url: 'https://www.ghanaiantimes.com.gh/feed/', section: 'News' },\r\n    { source: 'Starr FM', url: 'https://starrfm.com.gh/feed/', section: 'News' },\r\n    { source: 'News Ghana', url: 'https://newsghana.com.gh/feed/', section: 'News' },\r\n    { source: 'The B&FT', url: 'https://thebftonline.com/feed/', section: 'Business' },\r\n    { source: 'Atinka Online', url: 'https://atinkaonline.com/feed/', section: 'News' },\r\n    { source: 'Asaase Radio', url: 'https://asaaseradio.com/feed/', section: 'News' },\r\n    { source: 'The Herald', url: 'https://theheraldghana.com/feed/', section: 'News' },\r\n    { source: 'The Chronicle', url: 'https://thechronicle.com.gh/feed/', section: 'News' },\r\n    { source: 'GhPage', url: 'https://ghpage.com/feed/', section: 'Entertainment' },\r\n    { source: 'Ameyaw Debrah', url: 'https://ameyawdebrah.com/feed/', section: 'Entertainment' },\r\n    { source: 'YFM Ghana', url: 'https://yfmghana.com/feed/', section: 'Entertainment' },\r\n    { source: 'Happy Ghana', url: 'https://www.happyghana.com/feed/', section: 'News' },\r\n    { source: 'GhanaSoccerNet', url: 'https://ghanasoccernet.com/feed', section: 'Sports' }\r\n];\r\n\r\nasync function scrapeGenericRSS(): Promise<Story[]> {\r\n    const stories: Story[] = [];\r\n\r\n    await Promise.all(GENERIC_FEEDS.map(async (feed) => {\r\n        try {\r\n            const res = await fetch(feed.url, {\r\n                headers: { 'User-Agent': 'Mozilla/5.0' },\r\n                next: { revalidate: 300 }\r\n            });\r\n            if (!res.ok) return;\r\n\r\n            const xml = await res.text();\r\n            const $ = cheerio.load(xml, { xmlMode: true });\r\n\r\n            let items = $('item');\r\n            let isAtom = false;\r\n\r\n            if (items.length === 0) {\r\n                items = $('entry');\r\n                isAtom = true;\r\n            }\r\n\r\n            items.slice(0, 5).each((_, el) => {\r\n                const title = $(el).find('title').text().trim();\r\n\r\n                let link = '';\r\n                if (isAtom) {\r\n                    link = $(el).find('link').attr('href') || $(el).find('link').text().trim();\r\n                } else {\r\n                    link = $(el).find('link').text().trim();\r\n                    if (!link) link = $(el).find('guid').text().trim();\r\n                }\r\n\r\n                let pubDate = '';\r\n                if (isAtom) {\r\n                    pubDate = $(el).find('published').text() || $(el).find('updated').text();\r\n                } else {\r\n                    pubDate = $(el).find('pubDate').text().trim();\r\n                }\r\n\r\n                if (!link) return;\r\n\r\n                let timestamp = Date.now();\r\n                let timeDisplay = 'Recent';\r\n                if (pubDate) {\r\n                    const parsed = parsePublicationDate(pubDate);\r\n                    timestamp = parsed.timestamp;\r\n                    timeDisplay = parsed.display;\r\n                }\r\n\r\n                let image = $(el).find('media\\\\:content').attr('url')?.trim() ||\r\n                    $(el).find('media\\\\:thumbnail').attr('url')?.trim() ||\r\n                    $(el).find('enclosure').attr('url')?.trim();\r\n\r\n                if (!image) {\r\n                    // Try content for image\r\n                    const content = $(el).find('content\\\\:encoded').text() || $(el).find('content').text() || $(el).find('description').text();\r\n                    const match = content.match(/src=\"([^\"]+)\"/);\r\n                    if (match) image = match[1]?.trim();\r\n                }\r\n\r\n\r\n                let category = '';\r\n                if (isAtom) {\r\n                    category = $(el).find('category').attr('term') ||\r\n                        $(el).find('category').attr('label') || '';\r\n                } else {\r\n                    category = $(el).find('category').first().text().trim();\r\n                }\r\n\r\n                if (category.toLowerCase().includes('news')) category = 'News';\r\n                else if (category.length > 20) category = category.substring(0, 20) + '...';\r\n\r\n                stories.push({\r\n                    id: `${feed.source.toLowerCase().replace(/\\s+/g, '')}-${stories.length + Math.random()}`,\r\n                    source: feed.source,\r\n                    title,\r\n                    link,\r\n                    image: image || null,\r\n                    time: timeDisplay,\r\n                    timestamp,\r\n                    section: category || feed.section\r\n                });\r\n            });\r\n\r\n        } catch (e) {\r\n            console.error(`Generic RSS ${feed.source} Error:`, e);\r\n        }\r\n    }));\r\n\r\n    return stories;\r\n}\r\n\r\n// ---------------------------------------------------------------------------\r\n// Main Handler\r\n// ---------------------------------------------------------------------------\r\n\r\nexport async function GET(request: Request) {\r\n    const authHeader = request.headers.get('authorization');\r\n    // Basic auth check optional if manually triggering, but good practice.\r\n    // For now we allow open access or simpler for the user's \"app poll\" requirement.\r\n\r\n    console.log('CRON: Starting scrape...');\r\n\r\n    const [ghanaStories, adomStories, peaceStories, joyStories, threeNewsStories, dailyGuideResult, genericStories] = await Promise.all([\r\n        scrapeGhanaWeb(),\r\n        scrapeAdomOnline(),\r\n        scrapePeaceFM(),\r\n        scrapeMyJoyOnline(),\r\n        scrape3News(),\r\n        scrapeDailyGuide(),\r\n        scrapeGenericRSS()\r\n    ]);\r\n\r\n    const dailyGuideStories = dailyGuideResult.stories;\r\n\r\n    let allStories = [...ghanaStories, ...adomStories, ...peaceStories, ...joyStories, ...threeNewsStories, ...dailyGuideStories, ...genericStories];\r\n\r\n    // Deduplicate by link\r\n    const uniqueMap = new Map();\r\n    allStories.forEach(s => uniqueMap.set(s.link, s));\r\n    allStories = Array.from(uniqueMap.values());\r\n\r\n    // sort\r\n    allStories.sort((a, b) => b.timestamp - a.timestamp);\r\n\r\n    // Deep Fetch Metadata for ALL articles to ensure correct images and dates\r\n    const batch = allStories.slice(0, 80); // Limit to 80 articles per scrape\r\n\r\n    console.log(`CRON: Fetching metadata for ${batch.length} articles...`);\r\n\r\n    await Promise.all(batch.map(async (story) => {\r\n        const metadata = await fetchArticleMetadata(story.link, story.source);\r\n\r\n        if (metadata.timestamp && metadata.time) {\r\n            story.timestamp = metadata.timestamp;\r\n            story.time = metadata.time;\r\n        }\r\n        if (metadata.image) {\r\n            story.image = metadata.image;\r\n        }\r\n        if (metadata.content) {\r\n            story.content = metadata.content;\r\n        }\r\n    }));\r\n\r\n\r\n    allStories.sort((a, b) => b.timestamp - a.timestamp);\r\n\r\n    allStories.forEach(story => {\r\n        if (story.image) {\r\n            story.image = story.image.trim();\r\n        }\r\n    });\r\n\r\n    const storiesWithImages = allStories.filter(story =>\r\n        story.image !== null &&\r\n        story.image !== '' &&\r\n        !story.image.toLowerCase().endsWith('.svg')\r\n    );\r\n    console.log(`CRON: Filtered -> ${storiesWithImages.length} articles to insert`);\r\n\r\n    const newArticlesCount = await insertArticles(storiesWithImages as Article[]);\r\n    console.log(`CRON: Added ${newArticlesCount} new articles`);\r\n\r\n    const deletedInvalid = await deleteInvalidArticles();\r\n    const deletedOld = await deleteOldArticles(500);\r\n    console.log(`CRON: Cleanup -> Removed ${deletedInvalid} invalid and ${deletedOld} old articles.`);\r\n\r\n    return NextResponse.json({\r\n        success: true,\r\n        added: newArticlesCount,\r\n        cleaned_invalid: deletedInvalid,\r\n        cleaned_old: deletedOld\r\n    });\r\n}\r\n"],"names":[],"mappings":"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"}}]
}